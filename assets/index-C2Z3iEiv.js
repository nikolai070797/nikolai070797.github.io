import{a as v,p as r,y as g}from"./chunk-C37GKA54-1aOc6qnp.js";import{C as A}from"./ClientForm-BDvTOZDa.js";import{b as S}from"./profileStore-CksLVF07.js";import{M as V}from"./Modal-CHT3Earw.js";import{u as j}from"./notistack.esm-Dw3WdZ5J.js";import{u as d}from"./useTranslation-CNdmgvig.js";import{A as I,a as T}from"./AlertTitle-DOZWxlXp.js";import{v as c}from"./Typography-DyWZUj9a.js";import{B as L}from"./index-Caxphnaj.js";import"./zod-D6MPtulx.js";import"./Modal-CkE2dPQb.js";import"./index-BfSeETMd.js";import"./InputBase-CzclhWl_.js";import"./types-DmZI4N8b.js";import"./DialogTitle-Ct1jLhFg.js";import"./IconButton-DmZv7dyR.js";import"./Close-DzgE1lvC.js";const P=()=>{const{profile:a,updateProfile:p,error:E,serverErrors:s}=S(),[f,m]=v.useState(!1),{t}=d(),{enqueueSnackbar:u}=j(),x=async o=>{const e=await p(o);s&&s.errors.some(n=>{var l;return((l=n.extensions)==null?void 0:l.code)==="ERR_INTERNAL_SERVER"})?m(!0):e&&!E&&(!s||s.errors.length===0)&&u(t("pages.profile.updateProfile.success"),{variant:"success"})};function _(){m(!1)}const N=()=>{if(s&&s.errors.length>0){const o=s.errors.find(e=>{var i;return((i=e.extensions)==null?void 0:i.code)==="ERR_INTERNAL_SERVER"});if(o)return o.message||t("errors.server.ERR_INTERNAL_SERVER")}return t("errors.server.ERR_INTERNAL_SERVER")},h=s&&s.errors.some(o=>{var e;return((e=o.extensions)==null?void 0:e.code)!=="ERR_INTERNAL_SERVER"}),R=(()=>{var o;if(h&&s){const e=s.errors.find(i=>{var n;return((n=i.extensions)==null?void 0:n.code)!=="ERR_INTERNAL_SERVER"});if(e){const i=(o=e.extensions)==null?void 0:o.code;let n="",l="";return i?(n=t(`errors.server.${i}`,{fieldName:e.fieldName,defaultValue:t("errors.server.ERR_VALIDATION_ERROR")}),l=e.message||""):(n=t("errors.server.ERR_VALIDATION_ERROR"),l=e.message||""),{title:n,description:l}}}return E?{title:t("errors.server.ERR_VALIDATION_ERROR"),description:E}:null})();return r.jsxs(r.Fragment,{children:[R&&r.jsxs(I,{severity:"error",sx:{mb:2},children:[r.jsx(T,{children:R.title}),R.description&&r.jsx(c,{variant:"body2",children:R.description})]}),r.jsx(A,{defaultValues:a,onSubmit:x}),r.jsx(V,{open:f,onClose:_,title:r.jsx(c,{children:t("errors.server.ERR_INTERNAL_SERVER")}),children:r.jsx(c,{children:N()})})]})},y=()=>{const{t:a}=d("translation",{keyPrefix:"pages.profile"});return r.jsxs(r.Fragment,{children:[r.jsx(c,{children:a("title")}),r.jsx(L,{sx:{mt:3},children:r.jsx(c,{children:a("updateProfile.title")})}),r.jsx(P,{})]})},W=()=>{const{t:a}=d("translation",{keyPrefix:"pages.profile"});return[{title:a("title")}]},X=g(y);export{X as default,W as meta};
