import{a as l,p as t,y as k}from"./chunk-C37GKA54-1aOc6qnp.js";import{k as I}from"./QueryClientProvider-DAj1Dszq.js";import{u as b,L as B}from"./List-BGsElyhc.js";import{p as E}from"./productApi-Wc9uCWn5.js";import{a as q,C as w,P as F}from"./CartItem-Nokkr-Aw.js";import{u as x}from"./useTranslation-CNdmgvig.js";import{B as i,b as L}from"./index-Caxphnaj.js";import{v as a,E as S}from"./Typography-DyWZUj9a.js";import{S as u}from"./Stack-DSn4zSPF.js";import"./useThemeProps-WBOW5CEa.js";import"./Delete-CVYJJiMP.js";import"./index-BfSeETMd.js";import"./IconButton-DmZv7dyR.js";const T=()=>{const{cartItems:r,removeProduct:m,clear:h}=q(),{t:s}=x(),p=l.useMemo(()=>r.map(e=>e.productId),[r]),{data:o,isLoading:j,isError:f,error:g,isFetching:y}=b({queryKey:["products",{ids:p}],queryFn:({signal:e})=>E.list({ids:p},{signal:e}),placeholderData:I,staleTime:6e4}),n=(o==null?void 0:o.data)??[],C=l.useMemo(()=>r.reduce((e,d)=>{const c=n.find(P=>P.id===d.productId);return e+((c==null?void 0:c.price)??0)*d.quantity},0),[r,n]),v=l.useCallback(e=>m(e),[m]);return r.length===0?t.jsxs(i,{p:2,children:[t.jsx(a,{variant:"h4",gutterBottom:!0,children:s("pages.cart.title")}),t.jsx(a,{children:s("pages.cart.empty")})]}):t.jsxs(i,{p:2,children:[t.jsxs(u,{direction:"row",justifyContent:"space-between",mb:2,alignItems:"center",children:[t.jsx(a,{variant:"h4",children:s("pages.cart.title")}),t.jsx(L,{variant:"outlined",onClick:h,disabled:y,children:s("pages.cart.clear")})]}),j?t.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",height:200,children:t.jsx(S,{})}):f?t.jsx(a,{color:"error",children:g.message}):t.jsxs(t.Fragment,{children:[t.jsx(u,{spacing:2,children:t.jsx(B,{items:n,renderItem:e=>t.jsx(w,{product:e,onRemove:()=>v(e.id)})})}),t.jsx(i,{mt:3,display:"flex",justifyContent:"flex-end",children:t.jsxs(a,{variant:"h6",children:[s("pages.cart.total"),": ",t.jsx(F,{price:C})]})})]})]})},V=()=>{const{t:r}=x("translation",{keyPrefix:"pages.cart"});return[{title:r("title")}]},W=k(T);export{W as default,V as meta};
