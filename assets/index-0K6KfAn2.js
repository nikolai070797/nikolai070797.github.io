import{a as l,p as e,y as I}from"./chunk-C37GKA54-1aOc6qnp.js";import{l as b,C as k,P as q,q as B}from"./QueryClientProvider-B_WM-jAJ.js";import{u as E,S as u,P as w,p as F}from"./ProductList-D6wuJ_nx.js";import{u as x}from"./useTranslation-CNdmgvig.js";import{B as n,b as S}from"./index-BgKIfoby.js";import{v as a,E as T}from"./Typography-DrPmCJ9h.js";import"./index-BfSeETMd.js";const D=()=>{const{cartItems:r,removeProduct:d,clear:h}=b(),{t:s}=x(),p=l.useMemo(()=>r.map(t=>t.productId),[r]),{data:i,isLoading:j,isError:g,error:f,isFetching:y}=E({queryKey:["products",{ids:p}],queryFn:({signal:t})=>F.list({ids:p},{signal:t}),placeholderData:B,staleTime:6e4}),o=(i==null?void 0:i.data)??[],C=l.useMemo(()=>r.reduce((t,m)=>{const c=o.find(v=>v.id===m.productId);return t+((c==null?void 0:c.price)??0)*m.quantity},0),[r,o]),P=l.useCallback(t=>d(t),[d]);return r.length===0?e.jsxs(n,{p:2,children:[e.jsx(a,{variant:"h4",gutterBottom:!0,children:s("pages.cart.title")}),e.jsx(a,{children:s("pages.cart.empty")})]}):e.jsxs(n,{p:2,children:[e.jsxs(u,{direction:"row",justifyContent:"space-between",mb:2,alignItems:"center",children:[e.jsx(a,{variant:"h4",children:s("pages.cart.title")}),e.jsx(S,{variant:"outlined",onClick:h,disabled:y,children:s("pages.cart.clear")})]}),j?e.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",height:200,children:e.jsx(T,{})}):g?e.jsx(a,{color:"error",children:f.message}):e.jsxs(e.Fragment,{children:[e.jsx(u,{spacing:2,children:e.jsx(w,{products:o,renderItem:t=>e.jsx(k,{product:t,onRemove:()=>P(t.id)})})}),e.jsx(n,{mt:3,display:"flex",justifyContent:"flex-end",children:e.jsxs(a,{variant:"h6",children:[s("pages.cart.total"),": ",e.jsx(q,{price:C})]})})]})]})},G=()=>{const{t:r}=x("translation",{keyPrefix:"pages.cart"});return[{title:r("title")}]},H=I(D);export{H as default,G as meta};
