var xn=Object.defineProperty;var At=e=>{throw TypeError(e)};var Cn=(e,t,n)=>t in e?xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qe=(e,t,n)=>Cn(e,typeof t!="symbol"?t+"":t,n),ft=(e,t,n)=>t.has(e)||At("Cannot "+n);var I=(e,t,n)=>(ft(e,t,"read from private field"),n?n.call(e):t.get(e)),H=(e,t,n)=>t.has(e)?At("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),j=(e,t,n,r)=>(ft(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),re=(e,t,n)=>(ft(e,t,"access private method"),n);import{p as S,a as f,C as Jt,R as Sn}from"./chunk-C37GKA54-1aOc6qnp.js";import{q as St,v as pt,I as wn}from"./Typography-DrPmCJ9h.js";import{c as Pn,s as Fn,p as Dn,b as Tn,B as we}from"./index-BgKIfoby.js";import{u as Nn}from"./useTranslation-CNdmgvig.js";import{a as Mn}from"./index-BfSeETMd.js";const Zt=Pn()(Fn(Dn(e=>({cartItems:[],addProduct:t=>e(n=>n.cartItems.find(s=>s.productId===t.id)?{cartItems:n.cartItems.map(s=>s.productId===t.id?{...s,quantity:s.quantity+1}:s)}:{cartItems:[...n.cartItems,{productId:t.id,quantity:1}]}),decrementProduct:t=>e(n=>{const r=n.cartItems.find(s=>s.productId===t);return r?r.quantity>1?{cartItems:n.cartItems.map(s=>s.productId===t?{...s,quantity:s.quantity-1}:s)}:{cartItems:n.cartItems.filter(s=>s.productId!==t)}:n}),removeProduct:t=>e(n=>({cartItems:n.cartItems.filter(r=>r.productId!==t)})),clear:()=>e({cartItems:[]}),setQuantity:(t,n)=>e(r=>n<=0?{cartItems:r.cartItems.filter(i=>i.productId!==t)}:r.cartItems.find(i=>i.productId===t)?{cartItems:r.cartItems.map(i=>i.productId===t?{...i,quantity:n}:i)}:r)}),{name:"cart-store",version:2}))),Ss=()=>{const{cartItems:e}=Zt();return e.reduce((t,n)=>t+n.quantity,0)},An=St(S.jsx("path",{d:"M19 13H5v-2h14z"})),Vn=St(S.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),kn="_buy_14ldy_1",jn="_field_14ldy_9",_n="_group_14ldy_34",Un="_input_14ldy_38",Ln="_decrement_14ldy_62",On="_increment_14ldy_63",Se={buy:kn,field:jn,group:_n,input:Un,decrement:Ln,increment:On};function Bn({controlled:e,default:t,name:n,state:r="value"}){const{current:s}=f.useRef(e!==void 0),[i,h]=f.useState(t),a=s?e:i,c=f.useCallback(p=>{s||h(p)},[]);return[a,c]}const Vt={};function Ae(e,t){const n=f.useRef(Vt);return n.current===Vt&&(n.current=e(t)),n}const dt=Jt[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],qn=dt&&dt!==f.useLayoutEffect?dt:e=>e();function ne(e){const t=Ae(Kn).current;return t.next=e,qn(t.effect),t.trampoline}function Kn(){const e={next:void 0,callback:Gn,trampoline:(...t)=>{var n;return(n=e.callback)==null?void 0:n.call(e,...t)},effect:()=>{e.callback=e.next}};return e}function Gn(){}const Hn=[];function en(e){f.useEffect(e,Hn)}const Ke=0;class rt{constructor(){qe(this,"currentId",Ke);qe(this,"clear",()=>{this.currentId!==Ke&&(clearTimeout(this.currentId),this.currentId=Ke)});qe(this,"disposeEffect",()=>this.clear)}static create(){return new rt}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=Ke,n()},t)}isStarted(){return this.currentId!==Ke}}function yt(){const e=Ae(rt.create).current;return en(e.disposeEffect),e}const kt=0;class wt extends rt{constructor(){super(...arguments);qe(this,"clear",()=>{this.currentId!==kt&&(clearInterval(this.currentId),this.currentId=kt)})}static create(){return new wt}start(n,r){this.clear(),this.currentId=setInterval(()=>{r()},n)}}function $n(){const e=Ae(wt.create).current;return en(e.disposeEffect),e}const Qn=()=>{},Y=typeof document<"u"?f.useLayoutEffect:Qn;function bt(e){const t=Ae(Wn,e).current;return t.next=e,Y(t.effect),t}function Wn(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}function zn(){const[,e]=f.useState({});return f.useCallback(()=>{e({})},[])}function Yn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xn(e){return(e==null?void 0:e.ownerDocument)||document}const st=typeof navigator<"u",ht=tr(),Jn=rr(),Zn=nr();typeof CSS>"u"||!CSS.supports||CSS.supports("-webkit-backdrop-filter:none");const er=ht.platform==="MacIntel"&&ht.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(ht.platform);st&&Jn.toLowerCase().startsWith("mac")&&navigator.maxTouchPoints;Zn.includes("jsdom/");function tr(){if(!st)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function nr(){if(!st)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function rr(){if(!st)return"";const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform??""}const tn=f.createContext(void 0);function it(){const e=f.useContext(tn);if(e===void 0)throw new Error("Base UI: NumberFieldRootContext is missing. NumberField parts must be placed within <NumberField.Root>.");return e}const te=()=>{};let jt=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const Pt={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},sr={valid(e){return e===null?null:e?{[jt.valid]:""}:{[jt.invalid]:""}}},ir=f.createContext({invalid:void 0,controlId:void 0,setControlId:te,labelId:void 0,setLabelId:te,messageIds:[],setMessageIds:te,name:void 0,validityData:{state:Pt,errors:[],error:"",value:"",initialValue:null},setValidityData:te,disabled:void 0,touched:!1,setTouched:te,dirty:!1,setDirty:te,filled:!1,setFilled:te,focused:!1,setFocused:te,validate:()=>null,validationMode:"onBlur",validationDebounceTime:0,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1}});function at(e=!0){const t=f.useContext(ir);if(t.setControlId===te&&!e)throw new Error("Base UI: FieldRootContext is missing. Field parts must be placed within <Field.Root>.");return t}const $e={inputValue:()=>null,value:()=>null};function _t(e,t,n,r){const s=Ae(nn).current;return or(s,e,t,n,r)&&rn(s,[e,t,n,r]),s.callback}function ar(e){const t=Ae(nn).current;return ur(t,e)&&rn(t,e),t.callback}function nn(){return{callback:null,cleanup:null,refs:[]}}function or(e,t,n,r,s){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==r||e.refs[3]!==s}function ur(e,t){return e.refs.length!==t.length||e.refs.some((n,r)=>n!==t[r])}function rn(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const r=Array(t.length).fill(null);for(let s=0;s<t.length;s+=1){const i=t[s];if(i!=null)switch(typeof i){case"function":{const h=i(n);typeof h=="function"&&(r[s]=h);break}case"object":{i.current=n;break}}}e.cleanup=()=>{for(let s=0;s<t.length;s+=1){const i=t[s];if(i!=null)switch(typeof i){case"function":{const h=r[s];typeof h=="function"?h():i(null);break}case"object":{i.current=null;break}}}}}}}const cr=parseInt(f.version,10);function lr(e){return cr>=e}function sn(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function fr(e,t){const n={};for(const r in e){const s=e[r];if(t!=null&&t.hasOwnProperty(r)){const i=t[r](s);i!=null&&Object.assign(n,i);continue}s===!0?n[`data-${r.toLowerCase()}`]="":s&&(n[`data-${r.toLowerCase()}`]=s.toString())}return n}function dr(e,t){return typeof e=="function"?e(t):e}const Ge={};function et(e,t,n,r,s){let i={...vt(e,Ge)};return t&&(i=Je(i,t)),n&&(i=Je(i,n)),r&&(i=Je(i,r)),i}function hr(e){if(e.length===0)return Ge;if(e.length===1)return vt(e[0],Ge);let t={...vt(e[0],Ge)};for(let n=1;n<e.length;n+=1)t=Je(t,e[n]);return t}function Je(e,t){return an(t)?t(e):mr(e,t)}function mr(e,t){if(!t)return e;for(const n in t){const r=t[n];switch(n){case"style":{e[n]=sn(e.style,r);break}case"className":{e[n]=on(e.className,r);break}default:pr(n,r)?e[n]=yr(e[n],r):e[n]=r}}return e}function pr(e,t){const n=e.charCodeAt(0),r=e.charCodeAt(1),s=e.charCodeAt(2);return n===111&&r===110&&s>=65&&s<=90&&(typeof t=="function"||typeof t>"u")}function an(e){return typeof e=="function"}function vt(e,t){return an(e)?e(t):e??Ge}function yr(e,t){return t?e?n=>{if(br(n)){const s=n;gt(s);const i=t(s);return s.baseUIHandlerPrevented||e==null||e(s),i}const r=t(n);return e==null||e(n),r}:t:e}function gt(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function on(e,t){return t?e?t+" "+e:t:e}function br(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}const Pe={};function Qe(e,t,n={}){const r=t.render,s=vr(t,n);if(n.enabled===!1)return null;const i=n.state??Pe;return gr(e,r,s,i)}function vr(e,t={}){const{className:n,render:r}=e,{state:s=Pe,ref:i,props:h,disableStyleHooks:a,customStyleHookMapping:c,enabled:p=!0}=t,u=p?dr(n,s):void 0;let l;a!==!0&&(l=f.useMemo(()=>p?fr(s,c):Pe,[s,c,p]));const o=p?sn(l,Array.isArray(h)?hr(h):h)??Pe:Pe;return typeof document<"u"&&(p?Array.isArray(i)?o.ref=ar([o.ref,Ut(r),...i]):o.ref=_t(o.ref,Ut(r),i):_t(null,null)),p?(u!==void 0&&(o.className=on(o.className,u)),o):Pe}function gr(e,t,n,r){if(t){if(typeof t=="function")return t(n,r);const s=et(n,t.props);return s.ref=n.ref,f.cloneElement(t,s)}if(e&&typeof e=="string")return Ir(e,n);throw new Error("Base UI: Render element or function are not defined.")}function Ir(e,t){return e==="button"?S.jsx("button",{type:"button",...t}):e==="img"?S.jsx("img",{alt:"",...t}):f.createElement(e,t)}function Ut(e){return e&&typeof e!="function"?lr(19)?e.props.ref:e.ref:null}const Lt=new Map;function tt(e,t){const n=JSON.stringify({locale:e,options:t}),r=Lt.get(n);if(r)return r;const s=new Intl.NumberFormat(e,t);return Lt.set(n,s),s}function Fe(e,t,n){return e==null?"":tt(t,n).format(e)}function un(e,t,n){return Fe(e,t,{...n,maximumFractionDigits:20})}const cn=["零","一","二","三","四","五","六","七","八","九"],ln=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],fn=["%","٪"],It=new RegExp(`[${ln.join("")}]`,"g"),Et=new RegExp(`[${cn.join("")}]`,"g"),Er=new RegExp(`[${fn.join("")}]`);function Ft(e,t){const n=tt(e,t).formatToParts(11111.1),r={};return n.forEach(s=>{r[s.type]=s.value}),tt(e).formatToParts(.1).forEach(s=>{s.type==="decimal"&&(r[s.type]=s.value)}),r}function ye(e,t,n){let r=t;r===void 0&&(It.test(e)?r="ar":Et.test(e)&&(r="zh"));const{group:s,decimal:i,currency:h,unit:a}=Ft(r,n);let c=null;s&&(c=new RegExp("\\p{Zs}","u").test(s)?new RegExp("\\p{Zs}","gu"):new RegExp(`\\${s}`,"g"));const u=[{regex:s?c:null,replacement:""},{regex:i?new RegExp(`\\${i}`,"g"):null,replacement:"."},{regex:h?new RegExp(`\\${h}`,"g"):null,replacement:""},{regex:a?new RegExp(`\\${a}`,"g"):null,replacement:""},{regex:It,replacement:m=>ln.indexOf(m).toString()},{regex:Et,replacement:m=>cn.indexOf(m).toString()}].reduce((m,{regex:v,replacement:P})=>v?m.replace(v,P):m,e);let l=parseFloat(u);const o=n==null?void 0:n.style,g=o==="unit"&&(n==null?void 0:n.unit)==="percent",y=Er.test(e)||o==="percent";return!g&&y&&(l/=100),Number.isNaN(l)?null:l}const Rr={...Jt};let Ot=0;function xr(e,t="mui"){const[n,r]=f.useState(e),s=e||n;return f.useEffect(()=>{n==null&&(Ot+=1,r(`${t}-${Ot}`))},[n,t]),s}const Bt=Rr.useId;function Cr(e,t){if(Bt!==void 0){const n=Bt();return e??`${t}-${n}`}return xr(e,t)}function Sr(e){return Cr(e,"base-ui")}const wr=60,Pr=400,Fr=50,Dr=3,Tr=8,nt=1;function Nr(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Xe(e,t={}){return parseFloat(tt("en-US",{maximumFractionDigits:t.maximumFractionDigits,minimumFractionDigits:t.minimumFractionDigits,useGrouping:!1}).format(e))}function Mr(e,{step:t,minWithDefault:n,maxWithDefault:r,minWithZeroDefault:s,format:i,snapOnStep:h,small:a}){if(e===null)return e;const c=Nr(e,n,r);if(t!=null&&h){if(a){const u=(c-s)/t,l=Math.round(u),o=s+l*t;return Xe(o,i)}const p=n!==Number.MIN_SAFE_INTEGER?n:s;if(t>0){const u=c-t,l=Math.floor((u-p)/t);return Xe(p+l*t+t,i)}if(t<0){const u=Math.abs(t),l=c-t,o=Math.ceil((l-p)/u);return Xe(p+o*u+t,i)}}return Xe(c,i)}const Ar=f.forwardRef(function(t,n){const{id:r,min:s,max:i,smallStep:h=.1,step:a=1,largeStep:c=10,required:p=!1,disabled:u=!1,readOnly:l=!1,name:o,defaultValue:g,value:y,onValueChange:m,allowWheelScrub:v=!1,snapOnStep:P=!1,format:d,locale:x,render:R,className:W,inputRef:w,...M}=t,{setControlId:L,setDirty:N,validityData:_,setValidityData:A,disabled:C,setFilled:F,invalid:b,name:V,state:G}=at(),q=C||u,O=V??o,[ie,We]=f.useState(!1),Z=s??Number.MIN_SAFE_INTEGER,he=i??Number.MAX_SAFE_INTEGER,ze=s??0,Ye=d==null?void 0:d.style,ae=f.useRef(null),E=Sr(r);Y(()=>(L(E),()=>{L(void 0)}),[E,L]);const[D,K]=Bn({controlled:y,default:g,name:"NumberField",state:"value"}),T=D??null,oe=bt(T);Y(()=>{F(T!==null)},[F,T]);const ue=zn(),me=bt(d),ce=ne(m),pe=yt(),Ve=$n(),ke=yt(),je=f.useRef(!1),_e=f.useRef(0),Re=f.useRef(!0),Ue=f.useRef(()=>{});Y(()=>{_.initialValue===null&&T!==_.initialValue&&A(B=>({...B,initialValue:T}))},[A,_.initialValue,T]);const[le,ee]=f.useState(()=>y!==void 0?qt(T,x,d):Fe(T,x,d)),[Le,ut]=f.useState("numeric"),Nt=ne(()=>{const{decimal:B,group:k,currency:Q}=Ft(x,d),U=new Set([".",",",B,k]);return Ye==="percent"&&fn.forEach(z=>U.add(z)),Ye==="currency"&&Q&&U.add(Q),Z<0&&U.add("-"),U}),xe=ne(B=>B!=null&&B.altKey?h:B!=null&&B.shiftKey?c:a),ct=ne((B,k,Q)=>{const U=k,z=Mr(B,{step:Q?xe(U)*Q:void 0,format:me.current,minWithDefault:Z,maxWithDefault:he,minWithZeroDefault:ze,snapOnStep:P,small:(U==null?void 0:U.altKey)??!1});ce==null||ce(z,k&&"nativeEvent"in k?k.nativeEvent:k),K(z),N(z!==_.initialValue),Re.current&&ee(Fe(z,x,d)),ue()}),Oe=ne((B,k,Q,U)=>{const z=Q??oe.current,Be=typeof z=="number"?z+B*k:Math.max(0,s??0);ct(Be,U,k)}),Ce=ne(()=>{ke.clear(),pe.clear(),Ve.clear(),Ue.current(),_e.current=0}),Mt=ne((B,k)=>{if(Ce(),!ae.current)return;const Q=Yn(ae.current);function U(Be){Be.preventDefault()}Q.addEventListener("contextmenu",U),Ue.current=()=>{Q.removeEventListener("contextmenu",U)},Q.addEventListener("pointerup",()=>{je.current=!1,Ce()},{once:!0});function z(){const Be=xe(k)??nt;Oe(Be,B?1:-1,void 0,k)}z(),pe.start(Pr,()=>{Ve.start(wr,z)})});Y(function(){if(!Re.current)return;const k=y!==void 0?qt(T,x,d):Fe(T,x,d);k!==le&&ee(k)}),Y(function(){if(!er)return;let k="text";Z>=0&&(k="decimal"),ut(k)},[Z,Ye]),f.useEffect(()=>()=>Ce(),[Ce]),f.useEffect(function(){const k=ae.current;if(q||l||!v||!k)return;function Q(U){if(U.ctrlKey||Xn(ae.current).activeElement!==ae.current)return;U.preventDefault();const z=xe(U)??nt;Oe(z,U.deltaY>0?-1:1,void 0,U)}return k.addEventListener("wheel",Q),()=>{k.removeEventListener("wheel",Q)}},[v,Oe,q,l,c,a,xe]);const lt=f.useMemo(()=>({...G,disabled:q,readOnly:l,required:p,value:T,inputValue:le,scrubbing:ie}),[G,q,l,p,T,le,ie]),En=f.useMemo(()=>({inputRef:ae,inputValue:le,value:T,startAutoChange:Mt,stopAutoChange:Ce,minWithDefault:Z,maxWithDefault:he,disabled:q,readOnly:l,id:E,setValue:ct,incrementValue:Oe,getStepAmount:xe,allowInputSyncRef:Re,formatOptionsRef:me,valueRef:oe,isPressedRef:je,intentionalTouchCheckTimeout:ke,movesAfterTouchRef:_e,name:O,required:p,invalid:b,inputMode:Le,getAllowedNonNumericKeys:Nt,min:s,max:i,setInputValue:ee,locale:x,isScrubbing:ie,setIsScrubbing:We,state:lt}),[ae,le,T,Mt,Ce,Z,he,q,l,E,ct,Oe,xe,Re,me,oe,je,ke,_e,O,p,b,Le,Nt,s,i,ee,x,ie,lt]),Rn=Qe("div",t,{ref:n,state:lt,props:M,customStyleHookMapping:$e});return S.jsxs(tn.Provider,{value:En,children:[Rn,O&&S.jsx("input",{type:"hidden",name:O,ref:w,value:T??"",disabled:q,required:p})]})});function qt(e,t,n){return(n==null?void 0:n.maximumFractionDigits)!=null||(n==null?void 0:n.minimumFractionDigits)!=null?Fe(e,t,n):un(e,t,n)}const Vr=f.forwardRef(function(t,n){const{render:r,className:s,...i}=t,{state:h}=it();return Qe("div",t,{ref:n,state:h,props:[{role:"group"},i],customStyleHookMapping:$e})}),kr=f.createContext(void 0);function jr(e=!1){const t=f.useContext(kr);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function _r(e){const{focusableWhenDisabled:t,disabled:n,composite:r=!1,tabIndex:s=0,isNativeButton:i}=e,h=r&&t!==!1,a=r&&t===!1;return{props:f.useMemo(()=>{const p={onKeyDown(u){n&&t&&u.key!=="Tab"&&u.preventDefault()}};return r||(p.tabIndex=s,!i&&n&&(p.tabIndex=t?s:-1)),(i&&(t||h)||!i&&n)&&(p["aria-disabled"]=n),i&&(!t||a)&&(p.disabled=n),p},[r,n,t,h,a,i,s])}}function dn(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:r=0,native:s=!0}=e,i=f.useRef(null),h=jr(!0)!==void 0,a=ne(()=>{const u=i.current;return!!((u==null?void 0:u.tagName)==="A"&&(u!=null&&u.href))}),{props:c}=_r({focusableWhenDisabled:n,disabled:t,composite:h,tabIndex:r,isNativeButton:s});return Y(()=>{const u=i.current;u instanceof HTMLButtonElement&&h&&t&&c.disabled===void 0&&u.disabled&&(u.disabled=!1)},[t,c.disabled,h]),{getButtonProps:f.useCallback((u={})=>{const{onClick:l,onMouseDown:o,onKeyUp:g,onKeyDown:y,onPointerDown:m,...v}=u;return et({type:s?"button":void 0,onClick(d){if(t){d.preventDefault();return}l==null||l(d)},onMouseDown(d){t||o==null||o(d)},onKeyDown(d){if(t||(gt(d),y==null||y(d)),d.baseUIHandlerPrevented)return;const x=d.target===d.currentTarget&&!s&&!a()&&!t,R=d.key==="Enter",W=d.key===" ";x&&((W||R)&&d.preventDefault(),R&&(l==null||l(d)))},onKeyUp(d){t||(gt(d),g==null||g(d)),!d.baseUIHandlerPrevented&&d.target===d.currentTarget&&!s&&!t&&d.key===" "&&(l==null||l(d))},onPointerDown(d){if(t){d.preventDefault();return}m==null||m(d)}},s?void 0:{role:"button"},c,v)},[t,c,s,a]),buttonRef:i}}function hn(e){const{allowInputSyncRef:t,disabled:n,formatOptionsRef:r,getStepAmount:s,id:i,incrementValue:h,inputRef:a,inputValue:c,intentionalTouchCheckTimeout:p,isIncrement:u,isPressedRef:l,locale:o,maxWithDefault:g,minWithDefault:y,movesAfterTouchRef:m,readOnly:v,setValue:P,startAutoChange:d,stopAutoChange:x,value:R,valueRef:W}=e,w=f.useRef({x:0,y:0}),M=f.useRef(!1),L=f.useRef(!1),N=f.useRef(""),_=R!=null&&R<=y,A=R!=null&&R>=g,C=ne(b=>{t.current=!0;const V=ye(c,o,r.current);V!==null&&(W.current=V,P(V,b))}),F=f.useMemo(()=>({disabled:n||(u?A:_),"aria-readonly":v||void 0,"aria-label":u?"Increase":"Decrease","aria-controls":i,tabIndex:-1,style:{WebkitUserSelect:"none",userSelect:"none"},onTouchStart(){M.current=!0},onTouchEnd(){M.current=!1},onClick(b){const V=n||v||(u?A:_);if(b.defaultPrevented||V||(N.current==="touch"?L.current:b.detail!==0))return;C(b.nativeEvent);const G=s(b)??nt;h(G,u?1:-1,void 0,b.nativeEvent)},onPointerDown(b){var q;const V=!b.button||b.button===0,G=n||(u?A:_);b.defaultPrevented||v||!V||G||(N.current=b.pointerType,L.current=!1,l.current=!0,w.current={x:b.clientX,y:b.clientY},C(b.nativeEvent),b.pointerType!=="touch"?(b.preventDefault(),(q=a.current)==null||q.focus(),d(u,b)):p.start(Fr,()=>{const O=m.current;m.current=0,O!=null&&O<Dr?(L.current=!0,d(u,b)):x()}))},onPointerMove(b){if(n||v||(u?A:_)||b.pointerType!=="touch"||!l.current)return;m.current!=null&&(m.current+=1);const{x:G,y:q}=w.current,O=G-b.clientX,ie=q-b.clientY;O**2+ie**2>Tr**2&&x()},onMouseEnter(b){const V=n||v||(u?A:_);b.defaultPrevented||V||!l.current||M.current||d(u,b)},onMouseLeave(){M.current||x()},onMouseUp(){M.current||x()}}),[C,n,s,i,h,a,u,p,A,_,l,m,v,d,x]);return f.useMemo(()=>({props:F}),[F])}const Ur=f.forwardRef(function(t,n){const{render:r,className:s,disabled:i=!1,nativeButton:h=!0,...a}=t,{allowInputSyncRef:c,disabled:p,formatOptionsRef:u,getStepAmount:l,id:o,incrementValue:g,inputRef:y,inputValue:m,intentionalTouchCheckTimeout:v,isPressedRef:P,locale:d,maxWithDefault:x,minWithDefault:R,movesAfterTouchRef:W,readOnly:w,setValue:M,startAutoChange:L,state:N,stopAutoChange:_,value:A,valueRef:C}=it(),F=i||p,{props:b}=hn({isIncrement:!0,inputRef:y,startAutoChange:L,stopAutoChange:_,minWithDefault:R,maxWithDefault:x,value:A,inputValue:m,disabled:F,readOnly:w,id:o,setValue:M,getStepAmount:l,incrementValue:g,allowInputSyncRef:c,formatOptionsRef:u,valueRef:C,isPressedRef:P,intentionalTouchCheckTimeout:v,movesAfterTouchRef:W,locale:d}),{getButtonProps:V,buttonRef:G}=dn({disabled:F,native:h}),q=f.useMemo(()=>({...N,disabled:F}),[N,F]);return Qe("button",t,{ref:[n,G],state:q,props:[b,a,V],customStyleHookMapping:$e})}),Lr=f.forwardRef(function(t,n){const{render:r,className:s,disabled:i=!1,nativeButton:h=!0,...a}=t,{allowInputSyncRef:c,disabled:p,formatOptionsRef:u,getStepAmount:l,id:o,incrementValue:g,inputRef:y,inputValue:m,intentionalTouchCheckTimeout:v,isPressedRef:P,maxWithDefault:d,minWithDefault:x,movesAfterTouchRef:R,readOnly:W,setValue:w,startAutoChange:M,state:L,stopAutoChange:N,value:_,valueRef:A,locale:C}=it(),F=i||p,{props:b}=hn({isIncrement:!1,inputRef:y,startAutoChange:M,stopAutoChange:N,minWithDefault:x,maxWithDefault:d,value:_,inputValue:m,disabled:F,readOnly:W,id:o,setValue:w,getStepAmount:l,incrementValue:g,allowInputSyncRef:c,formatOptionsRef:u,valueRef:A,isPressedRef:P,intentionalTouchCheckTimeout:v,movesAfterTouchRef:R,locale:C}),{getButtonProps:V,buttonRef:G}=dn({disabled:F,native:h}),q=f.useMemo(()=>({...L,disabled:F}),[L,F]);return Qe("button",t,{ref:[n,G],state:q,props:[b,a,V],customStyleHookMapping:$e})});function Or(e){e.preventDefault(),e.stopPropagation()}const Br=f.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:te});function Dt(){return f.useContext(Br)}function Rt(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const Ze=Object.keys(Pt);function qr(e){if(!e||e.valid||!e.valueMissing)return!1;let t=!1;for(const n of Ze)n!=="valid"&&(n==="valueMissing"&&(t=e[n]),e[n]&&(t=!1));return t}function Kr(){const{setValidityData:e,validate:t,messageIds:n,validityData:r,validationMode:s,validationDebounceTime:i,invalid:h,markedDirtyRef:a,controlId:c,state:p,name:u}=at(),{formRef:l,clearErrors:o}=Dt(),g=yt(),y=f.useRef(null),m=ne(async(d,x=!1)=>{const R=y.current;if(!R)return;if(x){if(p.valid!==!1)return;const A=R.validity;if(!A.valueMissing){const F={value:d,state:{...Pt,valid:!0},error:"",errors:[],initialValue:r.initialValue};if(R.setCustomValidity(""),c){const b=l.current.fields.get(c);b&&l.current.fields.set(c,{...b,...Rt(F,!1)})}e(F);return}const C=Ze.reduce((F,b)=>(F[b]=A[b],F),{});if(!C.valid&&!qr(C))return}function W(A){const C=Ze.reduce((b,V)=>(b[V]=A.validity[V],b),{});let F=!1;for(const b of Ze)if(b!=="valid"){if(b==="valueMissing"&&C[b])F=!0;else if(C[b])return C}return F&&!a.current&&(C.valid=!0,C.valueMissing=!1),C}g.clear();let w=null,M=[];const L=W(R);let N;if(R.validationMessage)N=R.validationMessage,M=[R.validationMessage];else{const A=Array.from(l.current.fields.values()).reduce((F,b)=>{var V,G;return b.name&&b.getValueRef&&(F[b.name]=(G=(V=b.getValueRef).current)==null?void 0:G.call(V)),F},{}),C=t(d,A);typeof C=="object"&&C!==null&&"then"in C?w=await C:w=C,w!==null&&(L.valid=!1,L.customError=!0,Array.isArray(w)?(M=w,R.setCustomValidity(w.join(`
`))):w&&(M=[w],R.setCustomValidity(w)))}const _={value:d,state:L,error:N??(Array.isArray(w)?w[0]:w??""),errors:M,initialValue:r.initialValue};if(c){const A=l.current.fields.get(c);A&&l.current.fields.set(c,{...A,...Rt(_,h)})}e(_)}),v=f.useCallback((d={})=>et({...n.length&&{"aria-describedby":n.join(" ")},...p.valid===!1&&{"aria-invalid":!0}},d),[n,p.valid]),P=f.useCallback((d={})=>et({onChange(x){if(x.nativeEvent.defaultPrevented)return;if(o(u),s!=="onChange"){m(x.currentTarget.value,!0);return}if(h)return;const R=x.currentTarget;if(R.value===""){m(R.value);return}g.clear(),i?g.start(i,()=>{m(R.value)}):m(R.value)}},v(d)),[v,o,u,g,m,h,s,i]);return f.useMemo(()=>({getValidationProps:v,getInputValidationProps:P,inputRef:y,commitValidation:m}),[v,P,m])}function Gr(e){const{formRef:t}=Dt(),{invalid:n,markedDirtyRef:r,validityData:s,setValidityData:i}=at(),{enabled:h=!0,value:a,id:c,name:p,controlRef:u,commitValidation:l}=e,o=bt(e.getValue);Y(()=>{var y;if(!h)return;let g=a;g===void 0&&(g=(y=o.current)==null?void 0:y.call(o)),s.initialValue===null&&g!==s.initialValue&&i(m=>({...m,initialValue:g}))},[h,i,a,s.initialValue,o]),Y(()=>{h&&c&&t.current.fields.set(c,{controlRef:u,validityData:Rt(s,n),validate(){var y;let g=a;g===void 0&&(g=(y=o.current)==null?void 0:y.call(o)),r.current=!0,Mn.flushSync(()=>l(g))},getValueRef:o,name:p})},[l,u,h,t,o,c,n,r,p,s,a]),Y(()=>{const g=t.current.fields;return()=>{c&&g.delete(c)}},[t,c])}const Hr={...sr,...$e},$r=new Set(["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape"]),Qr=f.forwardRef(function(t,n){const{render:r,className:s,...i}=t,{allowInputSyncRef:h,disabled:a,formatOptionsRef:c,getAllowedNonNumericKeys:p,getStepAmount:u,id:l,incrementValue:o,inputMode:g,inputValue:y,max:m,min:v,name:P,readOnly:d,required:x,setValue:R,state:W,setInputValue:w,locale:M,inputRef:L,value:N}=it(),{clearErrors:_}=Dt(),{labelId:A,validationMode:C,setTouched:F,setFocused:b,invalid:V}=at(),{getInputValidationProps:G,getValidationProps:q,commitValidation:O,inputRef:ie}=Kr(),We=f.useRef(!1),Z=f.useRef(!1);Gr({id:l,commitValidation:O,value:N,controlRef:L,name:P,getValue:()=>N??null});const he=f.useRef(N),ze=f.useRef(y);return Y(()=>{he.current===N&&ze.current===y||(_(P),C==="onChange"&&O(N))},[N,y,P,_,C,O]),Y(()=>{if(!(he.current===N||C==="onChange")){if(Z.current){Z.current=!1;return}O(N,!0)}},[O,C,N]),Y(()=>{he.current=N,ze.current=y},[N,y]),Qe("input",t,{ref:[n,L,ie],state:W,props:[{id:l,required:x,disabled:a,readOnly:d,inputMode:g,value:y,type:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-roledescription":"Number field","aria-invalid":V||void 0,"aria-labelledby":A,suppressHydrationWarning:!0,onFocus(E){if(E.defaultPrevented||d||a||We.current)return;We.current=!0,b(!0);const D=E.currentTarget,K=D.value.length;D.setSelectionRange(K,K)},onBlur(E){if(E.defaultPrevented||d||a)return;if(F(!0),b(!1),h.current=!0,y.trim()===""){R(null),C==="onBlur"&&O(null);return}const D=c.current,K=ye(y,M,D),T=Fe(K,M,D),oe=un(K,M,D),ue=ye(T,M,D),me=ye(oe,M,D);if(K===null)return;Z.current=!0,C==="onBlur"&&O(ue),(D==null?void 0:D.maximumFractionDigits)!=null||(D==null?void 0:D.minimumFractionDigits)!=null?(N!==ue&&R(ue,E.nativeEvent),y!==T&&w(T)):N!==me?R(ue,E.nativeEvent):!(K===N&&y===oe)&&y!==T&&w(T)},onChange(E){if(E.nativeEvent.defaultPrevented)return;h.current=!1;const D=E.target.value;if(D.trim()===""){w(D),R(null,E.nativeEvent);return}if(E.isTrusted){w(D);return}const K=ye(D,M,c.current);K!==null&&(w(D),R(K,E.nativeEvent))},onKeyDown(E){if(E.defaultPrevented||d||a)return;const D=E.nativeEvent;h.current=!0;const K=p();let T=K.has(E.key);const{decimal:oe,currency:ue,percentSign:me}=Ft([],c.current),ce=E.currentTarget.selectionStart,pe=E.currentTarget.selectionEnd,Ve=ce===0&&pe===y.length;if(E.key==="-"&&K.has("-")){const ee=ce===0&&pe===1&&y[0]==="-";T=!y.includes("-")||Ve||ee}[oe,ue,me].forEach(ee=>{if(E.key===ee){const Le=y.indexOf(ee),ut=ce===Le&&pe===Le+1;T=!y.includes(ee)||Ve||ut}});const ke=/^[0-9]$/.test(E.key),je=It.test(E.key),_e=Et.test(E.key),Re=$r.has(E.key);if(E.which===229||E.altKey||E.ctrlKey||E.metaKey||T||ke||je||_e||Re)return;const Ue=ye(y,M,c.current),le=u(E)??nt;Or(E),E.key==="ArrowUp"?o(le,1,Ue,D):E.key==="ArrowDown"?o(le,-1,Ue,D):E.key==="Home"&&v!=null?R(v,D):E.key==="End"&&m!=null&&R(m,D)},onPaste(E){if(E.defaultPrevented||d||a)return;E.preventDefault();const K=(E.clipboardData||window.Clipboard).getData("text/plain"),T=ye(K,M,c.current);T!==null&&(h.current=!1,R(T,E.nativeEvent),w(K))}},G(),q(),i],customStyleHookMapping:Hr})}),Wr=f.memo(({product:e})=>{const{t}=Nn("translation",{keyPrefix:"components.CartButtonAdd"}),n=Zt(),[r,s]=f.useState(0);f.useEffect(()=>{const p=n.cartItems.find(u=>u.productId===e.id);s(p?p.quantity:0)},[n.cartItems,e.id]);const i=()=>{n.addProduct(e)},h=()=>{n.decrementProduct(e.id)},a=p=>{const u=parseInt(p.target.value);!isNaN(u)&&u>=0&&n.setQuantity(e.id,u)},c=Sn.useId();return S.jsx(S.Fragment,{children:r===0?S.jsx(Tn,{variant:"contained",className:Se.buy,onClick:i,children:t("textButton")}):S.jsx(Ar,{id:c,value:r,className:Se.field,children:S.jsxs(Vr,{className:Se.group,children:[S.jsx(Lr,{className:Se.decrement,onClick:h,children:S.jsx(An,{})}),S.jsx(Qr,{className:Se.input,value:r,onChange:a}),S.jsx(Ur,{className:Se.increment,onClick:i,children:S.jsx(Vn,{})})]})})})}),zr=St(S.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Yr="_buttons_1yi30_5",Kt={"cart-item":"_cart-item_1yi30_1",buttons:Yr},Xr="_price_gxzs0_1",Gt={price:Xr,"price-old":"_price-old_gxzs0_8"},Jr=({price:e,oldPrice:t})=>S.jsxs(we,{component:"span",children:[S.jsx(pt,{component:"span",className:Gt.price,children:e.toLocaleString("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).replace("руб.","₽").replace(/\s/g," ")}),t&&S.jsx(pt,{component:"span",className:Gt["price-old"],children:t.toLocaleString("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).replace("руб.","₽").replace(/\s/g," ")})]}),ws=f.memo(({product:e,onRemove:t})=>S.jsxs(we,{gap:2,className:Kt["cart-item"],children:[S.jsx("img",{width:128,height:128,src:e.photo}),S.jsxs(we,{width:1,pr:2,sx:{display:"flex",justifyContent:"space-between"},children:[S.jsxs(we,{children:[S.jsx(pt,{variant:"h6",children:e.name}),S.jsx(Wr,{product:e})]}),S.jsxs(we,{children:[S.jsx(we,{className:Kt.buttons,children:S.jsx(wn,{"aria-label":"delete",children:S.jsx(zr,{onClick:t})})}),S.jsx(Jr,{price:e.price,oldPrice:e.oldPrice})]})]})]}));var mn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ot=typeof window>"u"||"Deno"in globalThis;function Ht(){}function Ps(e,t){return typeof e=="function"?e(t):e}function Zr(e){return typeof e=="number"&&e>=0&&e!==1/0}function es(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ts(e,t){return typeof e=="function"?e(t):e}function ns(e,t){return typeof e=="function"?e(t):e}function Fs(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:h,stale:a}=e;if(h){if(r){if(t.queryHash!==rs(h,t.options))return!1}else if(!Tt(t.queryKey,h))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function Ds(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(xt(t.options.mutationKey)!==xt(i))return!1}else if(!Tt(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function rs(e,t){return((t==null?void 0:t.queryKeyHashFn)||xt)(e)}function xt(e){return JSON.stringify(e,(t,n)=>Ct(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Tt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Tt(e[n],t[n])):!1}function pn(e,t){if(e===t)return e;const n=$t(e)&&$t(t);if(n||Ct(e)&&Ct(t)){const r=n?e:Object.keys(e),s=r.length,i=n?t:Object.keys(t),h=i.length,a=n?[]:{},c=new Set(r);let p=0;for(let u=0;u<h;u++){const l=n?u:i[u];(!n&&c.has(l)||n)&&e[l]===void 0&&t[l]===void 0?(a[l]=void 0,p++):(a[l]=pn(e[l],t[l]),a[l]===e[l]&&e[l]!==void 0&&p++)}return s===h&&p===s?e:a}return t}function Ts(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function $t(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ct(e){if(!Qt(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Qt(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Qt(e){return Object.prototype.toString.call(e)==="[object Object]"}function ss(e){return new Promise(t=>{setTimeout(t,e)})}function is(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?pn(e,t):t}function Ns(e){return e}function Ms(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function As(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var yn=Symbol();function as(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===yn?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Vs(e,t){return typeof e=="function"?e(...t):!!e}var be,fe,De,Wt,os=(Wt=class extends mn{constructor(){super();H(this,be);H(this,fe);H(this,De);j(this,De,t=>{if(!ot&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){I(this,fe)||this.setEventListener(I(this,De))}onUnsubscribe(){var t;this.hasListeners()||((t=I(this,fe))==null||t.call(this),j(this,fe,void 0))}setEventListener(t){var n;j(this,De,t),(n=I(this,fe))==null||n.call(this),j(this,fe,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){I(this,be)!==t&&(j(this,be,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof I(this,be)=="boolean"?I(this,be):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},be=new WeakMap,fe=new WeakMap,De=new WeakMap,Wt),us=new os,Te,de,Ne,zt,cs=(zt=class extends mn{constructor(){super();H(this,Te,!0);H(this,de);H(this,Ne);j(this,Ne,t=>{if(!ot&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){I(this,de)||this.setEventListener(I(this,Ne))}onUnsubscribe(){var t;this.hasListeners()||((t=I(this,de))==null||t.call(this),j(this,de,void 0))}setEventListener(t){var n;j(this,Ne,t),(n=I(this,de))==null||n.call(this),j(this,de,t(this.setOnline.bind(this)))}setOnline(t){I(this,Te)!==t&&(j(this,Te,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return I(this,Te)}},Te=new WeakMap,de=new WeakMap,Ne=new WeakMap,zt),bn=new cs;function ls(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function fs(e){return Math.min(1e3*2**e,3e4)}function vn(e){return(e??"online")==="online"?bn.isOnline():!0}var gn=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function mt(e){return e instanceof gn}function ds(e){let t=!1,n=0,r=!1,s;const i=ls(),h=m=>{var v;r||(o(new gn(m)),(v=e.abort)==null||v.call(e))},a=()=>{t=!0},c=()=>{t=!1},p=()=>us.isFocused()&&(e.networkMode==="always"||bn.isOnline())&&e.canRun(),u=()=>vn(e.networkMode)&&e.canRun(),l=m=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,m),s==null||s(),i.resolve(m))},o=m=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,m),s==null||s(),i.reject(m))},g=()=>new Promise(m=>{var v;s=P=>{(r||p())&&m(P)},(v=e.onPause)==null||v.call(e)}).then(()=>{var m;s=void 0,r||(m=e.onContinue)==null||m.call(e)}),y=()=>{if(r)return;let m;const v=n===0?e.initialPromise:void 0;try{m=v??e.fn()}catch(P){m=Promise.reject(P)}Promise.resolve(m).then(l).catch(P=>{var w;if(r)return;const d=e.retry??(ot?0:3),x=e.retryDelay??fs,R=typeof x=="function"?x(n,P):x,W=d===!0||typeof d=="number"&&n<d||typeof d=="function"&&d(n,P);if(t||!W){o(P);return}n++,(w=e.onFail)==null||w.call(e,n,P),ss(R).then(()=>p()?void 0:g()).then(()=>{t?o(P):y()})})};return{promise:i,cancel:h,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?y():g().then(y),i)}}var hs=e=>setTimeout(e,0);function ms(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=hs;const i=a=>{t?e.push(a):s(()=>{n(a)})},h=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||h()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ps=ms(),ve,Yt,ys=(Yt=class{constructor(){H(this,ve)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zr(this.gcTime)&&j(this,ve,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ot?1/0:300*1e3))}clearGcTimeout(){I(this,ve)&&(clearTimeout(I(this,ve)),j(this,ve,void 0))}},ve=new WeakMap,Yt),Me,ge,X,Ie,$,He,Ee,J,se,Xt,ks=(Xt=class extends ys{constructor(t){super();H(this,J);H(this,Me);H(this,ge);H(this,X);H(this,Ie);H(this,$);H(this,He);H(this,Ee);j(this,Ee,!1),j(this,He,t.defaultOptions),this.setOptions(t.options),this.observers=[],j(this,Ie,t.client),j(this,X,I(this,Ie).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,j(this,Me,vs(this.options)),this.state=t.state??I(this,Me),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=I(this,$))==null?void 0:t.promise}setOptions(t){this.options={...I(this,He),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,X).remove(this)}setData(t,n){const r=is(this.state.data,t,this.options);return re(this,J,se).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){re(this,J,se).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=I(this,$))==null?void 0:r.promise;return(s=I(this,$))==null||s.cancel(t),n?n.then(Ht).catch(Ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,Me))}isActive(){return this.observers.some(t=>ns(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ts(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!es(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=I(this,$))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=I(this,$))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),I(this,X).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(I(this,$)&&(I(this,Ee)?I(this,$).cancel({revert:!0}):I(this,$).cancelRetry()),this.scheduleGc()),I(this,X).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||re(this,J,se).call(this,{type:"invalidate"})}fetch(t,n){var p,u,l;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(I(this,$))return I(this,$).continueRetry(),I(this,$).promise}if(t&&this.setOptions(t),!this.options.queryFn){const o=this.observers.find(g=>g.options.queryFn);o&&this.setOptions(o.options)}const r=new AbortController,s=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(j(this,Ee,!0),r.signal)})},i=()=>{const o=as(this.options,n),y=(()=>{const m={client:I(this,Ie),queryKey:this.queryKey,meta:this.meta};return s(m),m})();return j(this,Ee,!1),this.options.persister?this.options.persister(o,y,this):o(y)},a=(()=>{const o={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:I(this,Ie),state:this.state,fetchFn:i};return s(o),o})();(p=this.options.behavior)==null||p.onFetch(a,this),j(this,ge,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&re(this,J,se).call(this,{type:"fetch",meta:(l=a.fetchOptions)==null?void 0:l.meta});const c=o=>{var g,y,m,v;mt(o)&&o.silent||re(this,J,se).call(this,{type:"error",error:o}),mt(o)||((y=(g=I(this,X).config).onError)==null||y.call(g,o,this),(v=(m=I(this,X).config).onSettled)==null||v.call(m,this.state.data,o,this)),this.scheduleGc()};return j(this,$,ds({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:o=>{var g,y,m,v;if(o===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(o)}catch(P){c(P);return}(y=(g=I(this,X).config).onSuccess)==null||y.call(g,o,this),(v=(m=I(this,X).config).onSettled)==null||v.call(m,o,this.state.error,this),this.scheduleGc()},onError:c,onFail:(o,g)=>{re(this,J,se).call(this,{type:"failed",failureCount:o,error:g})},onPause:()=>{re(this,J,se).call(this,{type:"pause"})},onContinue:()=>{re(this,J,se).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),I(this,$).start()}},Me=new WeakMap,ge=new WeakMap,X=new WeakMap,Ie=new WeakMap,$=new WeakMap,He=new WeakMap,Ee=new WeakMap,J=new WeakSet,se=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...bs(r.data,this.options),fetchMeta:t.meta??null};case"success":return j(this,ge,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return mt(s)&&s.revert&&I(this,ge)?{...I(this,ge),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),ps.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),I(this,X).notify({query:this,type:"updated",action:t})})},Xt);function bs(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vn(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vs(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var In=f.createContext(void 0),js=e=>{const t=f.useContext(In);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},_s=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),S.jsx(In.Provider,{value:e,children:t}));export{es as A,bs as B,ws as C,is as D,Vs as E,js as F,Jr as P,ks as Q,ys as R,mn as S,Ds as a,Ht as b,ds as c,As as d,as as e,Ms as f,us as g,rs as h,Ps as i,xt as j,_s as k,Zt as l,Fs as m,ps as n,bn as o,Tt as p,Ns as q,ts as r,yn as s,Wr as t,Ss as u,ls as v,ns as w,Ts as x,ot as y,Zr as z};
