var kt=Object.defineProperty;var _t=(e,t,n)=>t in e?kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ee=(e,t,n)=>_t(e,typeof t!="symbol"?t+"":t,n);import{p as R,a as i,z as bt,R as jt}from"./chunk-C37GKA54-PmDymV9p.js";import{q as et,v as We,I as Bt}from"./Typography-D1PY5qkP.js";import{c as Lt,s as Ut,p as Ot,a as $t,B as fe}from"./middleware-C6bdfTKr.js";import{u as Ht}from"./useTranslation-CT2sYqrC.js";import{a as Kt}from"./index-CqOg6cT8.js";const It=Lt()(Ut(Ot(e=>({cartItems:[],addProduct:t=>e(n=>n.cartItems.find(r=>r.productId===t.id)?{cartItems:n.cartItems.map(r=>r.productId===t.id?{...r,quantity:r.quantity+1}:r)}:{cartItems:[...n.cartItems,{productId:t.id,quantity:1}]}),decrementProduct:t=>e(n=>{const s=n.cartItems.find(r=>r.productId===t);return s?s.quantity>1?{cartItems:n.cartItems.map(r=>r.productId===t?{...r,quantity:r.quantity-1}:r)}:{cartItems:n.cartItems.filter(r=>r.productId!==t)}:n}),removeProduct:t=>e(n=>({cartItems:n.cartItems.filter(s=>s.productId!==t)})),clear:()=>e({cartItems:[]}),setQuantity:(t,n)=>e(s=>n<=0?{cartItems:s.cartItems.filter(o=>o.productId!==t)}:s.cartItems.find(o=>o.productId===t)?{cartItems:s.cartItems.map(o=>o.productId===t?{...o,quantity:n}:o)}:s)}),{name:"cart-store",version:2}))),br=()=>{const{cartItems:e}=It();return e.reduce((t,n)=>t+n.quantity,0)},Gt=et(R.jsx("path",{d:"M19 13H5v-2h14z"})),Wt=et(R.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Yt="_buy_14ldy_1",qt="_field_14ldy_9",zt="_group_14ldy_34",Xt="_input_14ldy_38",Jt="_decrement_14ldy_62",Qt="_increment_14ldy_63",le={buy:Yt,field:qt,group:zt,input:Xt,decrement:Jt,increment:Qt};function Zt({controlled:e,default:t,name:n,state:s="value"}){const{current:r}=i.useRef(e!==void 0),[o,l]=i.useState(t),h=r?e:o,d=i.useCallback(m=>{r||l(m)},[]);return[h,d]}const at={};function pe(e,t){const n=i.useRef(at);return n.current===at&&(n.current=e(t)),n}const Ke=bt[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],en=Ke&&Ke!==i.useLayoutEffect?Ke:e=>e();function X(e){const t=pe(tn).current;return t.next=e,en(t.effect),t.trampoline}function tn(){const e={next:void 0,callback:nn,trampoline:(...t)=>{var n;return(n=e.callback)==null?void 0:n.call(e,...t)},effect:()=>{e.callback=e.next}};return e}function nn(){}const rn=[];function xt(e){i.useEffect(e,rn)}const Ce=0;class je{constructor(){Ee(this,"currentId",Ce);Ee(this,"clear",()=>{this.currentId!==Ce&&(clearTimeout(this.currentId),this.currentId=Ce)});Ee(this,"disposeEffect",()=>this.clear)}static create(){return new je}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=Ce,n()},t)}isStarted(){return this.currentId!==Ce}}function Ye(){const e=pe(je.create).current;return xt(e.disposeEffect),e}const ut=0;class tt extends je{constructor(){super(...arguments);Ee(this,"clear",()=>{this.currentId!==ut&&(clearInterval(this.currentId),this.currentId=ut)})}static create(){return new tt}start(n,s){this.clear(),this.currentId=setInterval(()=>{s()},n)}}function sn(){const e=pe(tt.create).current;return xt(e.disposeEffect),e}const on=()=>{},G=typeof document<"u"?i.useLayoutEffect:on;function qe(e){const t=pe(an,e).current;return t.next=e,G(t.effect),t}function an(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}function un(){const[,e]=i.useState({});return i.useCallback(()=>{e({})},[])}function cn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ln(e){return(e==null?void 0:e.ownerDocument)||document}const Be=typeof navigator<"u",Ge=pn(),fn=yn(),dn=gn();typeof CSS>"u"||!CSS.supports||CSS.supports("-webkit-backdrop-filter:none");const mn=Ge.platform==="MacIntel"&&Ge.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(Ge.platform);Be&&fn.toLowerCase().startsWith("mac")&&navigator.maxTouchPoints;dn.includes("jsdom/");function pn(){if(!Be)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function gn(){if(!Be)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function yn(){if(!Be)return"";const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform??""}const vt=i.createContext(void 0);function Le(){const e=i.useContext(vt);if(e===void 0)throw new Error("Base UI: NumberFieldRootContext is missing. NumberField parts must be placed within <NumberField.Root>.");return e}const z=()=>{};let ct=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const nt={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},hn={valid(e){return e===null?null:e?{[ct.valid]:""}:{[ct.invalid]:""}}},bn=i.createContext({invalid:void 0,controlId:void 0,setControlId:z,labelId:void 0,setLabelId:z,messageIds:[],setMessageIds:z,name:void 0,validityData:{state:nt,errors:[],error:"",value:"",initialValue:null},setValidityData:z,disabled:void 0,touched:!1,setTouched:z,dirty:!1,setDirty:z,filled:!1,setFilled:z,focused:!1,setFocused:z,validate:()=>null,validationMode:"onBlur",validationDebounceTime:0,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1}});function Ue(e=!0){const t=i.useContext(bn);if(t.setControlId===z&&!e)throw new Error("Base UI: FieldRootContext is missing. Field parts must be placed within <Field.Root>.");return t}const Pe={inputValue:()=>null,value:()=>null};function lt(e,t,n,s){const r=pe(Rt).current;return xn(r,e,t,n,s)&&Et(r,[e,t,n,s]),r.callback}function In(e){const t=pe(Rt).current;return vn(t,e)&&Et(t,e),t.callback}function Rt(){return{callback:null,cleanup:null,refs:[]}}function xn(e,t,n,s,r){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==s||e.refs[3]!==r}function vn(e,t){return e.refs.length!==t.length||e.refs.some((n,s)=>n!==t[s])}function Et(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const s=Array(t.length).fill(null);for(let r=0;r<t.length;r+=1){const o=t[r];if(o!=null)switch(typeof o){case"function":{const l=o(n);typeof l=="function"&&(s[r]=l);break}case"object":{o.current=n;break}}}e.cleanup=()=>{for(let r=0;r<t.length;r+=1){const o=t[r];if(o!=null)switch(typeof o){case"function":{const l=s[r];typeof l=="function"?l():o(null);break}case"object":{o.current=null;break}}}}}}}const Rn=parseInt(i.version,10);function En(e){return Rn>=e}function Ct(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function Cn(e,t){const n={};for(const s in e){const r=e[s];if(t!=null&&t.hasOwnProperty(s)){const o=t[s](r);o!=null&&Object.assign(n,o);continue}r===!0?n[`data-${s.toLowerCase()}`]="":r&&(n[`data-${s.toLowerCase()}`]=r.toString())}return n}function Nn(e,t){return typeof e=="function"?e(t):e}const Ne={};function Fe(e,t,n,s,r){let o={...ze(e,Ne)};return t&&(o=we(o,t)),n&&(o=we(o,n)),s&&(o=we(o,s)),o}function Pn(e){if(e.length===0)return Ne;if(e.length===1)return ze(e[0],Ne);let t={...ze(e[0],Ne)};for(let n=1;n<e.length;n+=1)t=we(t,e[n]);return t}function we(e,t){return Nt(t)?t(e):Vn(e,t)}function Vn(e,t){if(!t)return e;for(const n in t){const s=t[n];switch(n){case"style":{e[n]=Ct(e.style,s);break}case"className":{e[n]=Pt(e.className,s);break}default:Sn(n,s)?e[n]=Tn(e[n],s):e[n]=s}}return e}function Sn(e,t){const n=e.charCodeAt(0),s=e.charCodeAt(1),r=e.charCodeAt(2);return n===111&&s===110&&r>=65&&r<=90&&(typeof t=="function"||typeof t>"u")}function Nt(e){return typeof e=="function"}function ze(e,t){return Nt(e)?e(t):e??Ne}function Tn(e,t){return t?e?n=>{if(Dn(n)){const r=n;Xe(r);const o=t(r);return r.baseUIHandlerPrevented||e==null||e(r),o}const s=t(n);return e==null||e(n),s}:t:e}function Xe(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Pt(e,t){return t?e?t+" "+e:t:e}function Dn(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}const de={};function Ve(e,t,n={}){const s=t.render,r=Mn(t,n);if(n.enabled===!1)return null;const o=n.state??de;return wn(e,s,r,o)}function Mn(e,t={}){const{className:n,render:s}=e,{state:r=de,ref:o,props:l,disableStyleHooks:h,customStyleHookMapping:d,enabled:m=!0}=t,a=m?Nn(n,r):void 0;let f;h!==!0&&(f=i.useMemo(()=>m?Cn(r,d):de,[r,d,m]));const g=m?Ct(f,Array.isArray(l)?Pn(l):l)??de:de;return typeof document<"u"&&(m?Array.isArray(o)?g.ref=In([g.ref,ft(s),...o]):g.ref=lt(g.ref,ft(s),o):lt(null,null)),m?(a!==void 0&&(g.className=Pt(g.className,a)),g):de}function wn(e,t,n,s){if(t){if(typeof t=="function")return t(n,s);const r=Fe(n,t.props);return r.ref=n.ref,i.cloneElement(t,r)}if(e&&typeof e=="string")return An(e,n);throw new Error("Base UI: Render element or function are not defined.")}function An(e,t){return e==="button"?R.jsx("button",{type:"button",...t}):e==="img"?R.jsx("img",{alt:"",...t}):i.createElement(e,t)}function ft(e){return e&&typeof e!="function"?En(19)?e.props.ref:e.ref:null}const dt=new Map;function ke(e,t){const n=JSON.stringify({locale:e,options:t}),s=dt.get(n);if(s)return s;const r=new Intl.NumberFormat(e,t);return dt.set(n,r),r}function me(e,t,n){return e==null?"":ke(t,n).format(e)}function Vt(e,t,n){return me(e,t,{...n,maximumFractionDigits:20})}const St=["零","一","二","三","四","五","六","七","八","九"],Tt=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],Dt=["%","٪"],Je=new RegExp(`[${Tt.join("")}]`,"g"),Qe=new RegExp(`[${St.join("")}]`,"g"),Fn=new RegExp(`[${Dt.join("")}]`);function rt(e,t){const n=ke(e,t).formatToParts(11111.1),s={};return n.forEach(r=>{s[r.type]=r.value}),ke(e).formatToParts(.1).forEach(r=>{r.type==="decimal"&&(s[r.type]=r.value)}),s}function ie(e,t,n){let s=t;s===void 0&&(Je.test(e)?s="ar":Qe.test(e)&&(s="zh"));const{group:r,decimal:o,currency:l,unit:h}=rt(s,n);let d=null;r&&(d=new RegExp("\\p{Zs}","u").test(r)?new RegExp("\\p{Zs}","gu"):new RegExp(`\\${r}`,"g"));const a=[{regex:r?d:null,replacement:""},{regex:o?new RegExp(`\\${o}`,"g"):null,replacement:"."},{regex:l?new RegExp(`\\${l}`,"g"):null,replacement:""},{regex:h?new RegExp(`\\${h}`,"g"):null,replacement:""},{regex:Je,replacement:I=>Tt.indexOf(I).toString()},{regex:Qe,replacement:I=>St.indexOf(I).toString()}].reduce((I,{regex:T,replacement:O})=>T?I.replace(T,O):I,e);let f=parseFloat(a);const g=n==null?void 0:n.style,v=g==="unit"&&(n==null?void 0:n.unit)==="percent",y=Fn.test(e)||g==="percent";return!v&&y&&(f/=100),Number.isNaN(f)?null:f}const kn={...bt};let mt=0;function _n(e,t="mui"){const[n,s]=i.useState(e),r=e||n;return i.useEffect(()=>{n==null&&(mt+=1,s(`${t}-${mt}`))},[n,t]),r}const pt=kn.useId;function jn(e,t){if(pt!==void 0){const n=pt();return e??`${t}-${n}`}return _n(e,t)}function Bn(e){return jn(e,"base-ui")}const Ln=60,Un=400,On=50,$n=3,Hn=8,_e=1;function Kn(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Me(e,t={}){return parseFloat(ke("en-US",{maximumFractionDigits:t.maximumFractionDigits,minimumFractionDigits:t.minimumFractionDigits,useGrouping:!1}).format(e))}function Gn(e,{step:t,minWithDefault:n,maxWithDefault:s,minWithZeroDefault:r,format:o,snapOnStep:l,small:h}){if(e===null)return e;const d=Kn(e,n,s);if(t!=null&&l){if(h){const a=(d-r)/t,f=Math.round(a),g=r+f*t;return Me(g,o)}const m=n!==Number.MIN_SAFE_INTEGER?n:r;if(t>0){const a=d-t,f=Math.floor((a-m)/t);return Me(m+f*t+t,o)}if(t<0){const a=Math.abs(t),f=d-t,g=Math.ceil((f-m)/a);return Me(m+g*a+t,o)}}return Me(d,o)}const Wn=i.forwardRef(function(t,n){const{id:s,min:r,max:o,smallStep:l=.1,step:h=1,largeStep:d=10,required:m=!1,disabled:a=!1,readOnly:f=!1,name:g,defaultValue:v,value:y,onValueChange:I,allowWheelScrub:T=!1,snapOnStep:O=!1,format:u,locale:C,render:b,className:W,inputRef:N,...D}=t,{setControlId:_,setDirty:S,validityData:F,setValidityData:M,disabled:x,setFilled:E,invalid:c,name:w,state:$}=Ue(),L=x||a,j=w??g,[J,Se]=i.useState(!1),Y=r??Number.MIN_SAFE_INTEGER,re=o??Number.MAX_SAFE_INTEGER,Te=r??0,De=u==null?void 0:u.style,Q=i.useRef(null),p=Bn(s);G(()=>(_(p),()=>{_(void 0)}),[p,_]);const[P,U]=Zt({controlled:y,default:v,name:"NumberField",state:"value"}),V=P??null,Z=qe(V);G(()=>{E(V!==null)},[E,V]);const ee=un(),se=qe(u),te=X(I),oe=Ye(),ge=sn(),ye=Ye(),he=i.useRef(!1),be=i.useRef(0),ae=i.useRef(!0),Ie=i.useRef(()=>{});G(()=>{F.initialValue===null&&V!==F.initialValue&&M(B=>({...B,initialValue:V}))},[M,F.initialValue,V]);const[ne,q]=i.useState(()=>y!==void 0?gt(V,C,u):me(V,C,u)),[xe,Oe]=i.useState("numeric"),ot=X(()=>{const{decimal:B,group:A,currency:H}=rt(C,u),k=new Set([".",",",B,A]);return De==="percent"&&Dt.forEach(K=>k.add(K)),De==="currency"&&H&&k.add(H),Y<0&&k.add("-"),k}),ue=X(B=>B!=null&&B.altKey?l:B!=null&&B.shiftKey?d:h),$e=X((B,A,H)=>{const k=A,K=Gn(B,{step:H?ue(k)*H:void 0,format:se.current,minWithDefault:Y,maxWithDefault:re,minWithZeroDefault:Te,snapOnStep:O,small:(k==null?void 0:k.altKey)??!1});te==null||te(K,A&&"nativeEvent"in A?A.nativeEvent:A),U(K),S(K!==F.initialValue),ae.current&&q(me(K,C,u)),ee()}),ve=X((B,A,H,k)=>{const K=H??Z.current,Re=typeof K=="number"?K+B*A:Math.max(0,r??0);$e(Re,k,A)}),ce=X(()=>{ye.clear(),oe.clear(),ge.clear(),Ie.current(),be.current=0}),it=X((B,A)=>{if(ce(),!Q.current)return;const H=cn(Q.current);function k(Re){Re.preventDefault()}H.addEventListener("contextmenu",k),Ie.current=()=>{H.removeEventListener("contextmenu",k)},H.addEventListener("pointerup",()=>{he.current=!1,ce()},{once:!0});function K(){const Re=ue(A)??_e;ve(Re,B?1:-1,void 0,A)}K(),oe.start(Un,()=>{ge.start(Ln,K)})});G(function(){if(!ae.current)return;const A=y!==void 0?gt(V,C,u):me(V,C,u);A!==ne&&q(A)}),G(function(){if(!mn)return;let A="text";Y>=0&&(A="decimal"),Oe(A)},[Y,De]),i.useEffect(()=>()=>ce(),[ce]),i.useEffect(function(){const A=Q.current;if(L||f||!T||!A)return;function H(k){if(k.ctrlKey||ln(Q.current).activeElement!==Q.current)return;k.preventDefault();const K=ue(k)??_e;ve(K,k.deltaY>0?-1:1,void 0,k)}return A.addEventListener("wheel",H),()=>{A.removeEventListener("wheel",H)}},[T,ve,L,f,d,h,ue]);const He=i.useMemo(()=>({...$,disabled:L,readOnly:f,required:m,value:V,inputValue:ne,scrubbing:J}),[$,L,f,m,V,ne,J]),At=i.useMemo(()=>({inputRef:Q,inputValue:ne,value:V,startAutoChange:it,stopAutoChange:ce,minWithDefault:Y,maxWithDefault:re,disabled:L,readOnly:f,id:p,setValue:$e,incrementValue:ve,getStepAmount:ue,allowInputSyncRef:ae,formatOptionsRef:se,valueRef:Z,isPressedRef:he,intentionalTouchCheckTimeout:ye,movesAfterTouchRef:be,name:j,required:m,invalid:c,inputMode:xe,getAllowedNonNumericKeys:ot,min:r,max:o,setInputValue:q,locale:C,isScrubbing:J,setIsScrubbing:Se,state:He}),[Q,ne,V,it,ce,Y,re,L,f,p,$e,ve,ue,ae,se,Z,he,ye,be,j,m,c,xe,ot,r,o,q,C,J,He]),Ft=Ve("div",t,{ref:n,state:He,props:D,customStyleHookMapping:Pe});return R.jsxs(vt.Provider,{value:At,children:[Ft,j&&R.jsx("input",{type:"hidden",name:j,ref:N,value:V??"",disabled:L,required:m})]})});function gt(e,t,n){return(n==null?void 0:n.maximumFractionDigits)!=null||(n==null?void 0:n.minimumFractionDigits)!=null?me(e,t,n):Vt(e,t,n)}const Yn=i.forwardRef(function(t,n){const{render:s,className:r,...o}=t,{state:l}=Le();return Ve("div",t,{ref:n,state:l,props:[{role:"group"},o],customStyleHookMapping:Pe})}),qn=i.createContext(void 0);function zn(e=!1){const t=i.useContext(qn);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function Xn(e){const{focusableWhenDisabled:t,disabled:n,composite:s=!1,tabIndex:r=0,isNativeButton:o}=e,l=s&&t!==!1,h=s&&t===!1;return{props:i.useMemo(()=>{const m={onKeyDown(a){n&&t&&a.key!=="Tab"&&a.preventDefault()}};return s||(m.tabIndex=r,!o&&n&&(m.tabIndex=t?r:-1)),(o&&(t||l)||!o&&n)&&(m["aria-disabled"]=n),o&&(!t||h)&&(m.disabled=n),m},[s,n,t,l,h,o,r])}}function Mt(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:s=0,native:r=!0}=e,o=i.useRef(null),l=zn(!0)!==void 0,h=X(()=>{const a=o.current;return!!((a==null?void 0:a.tagName)==="A"&&(a!=null&&a.href))}),{props:d}=Xn({focusableWhenDisabled:n,disabled:t,composite:l,tabIndex:s,isNativeButton:r});return G(()=>{const a=o.current;a instanceof HTMLButtonElement&&l&&t&&d.disabled===void 0&&a.disabled&&(a.disabled=!1)},[t,d.disabled,l]),{getButtonProps:i.useCallback((a={})=>{const{onClick:f,onMouseDown:g,onKeyUp:v,onKeyDown:y,onPointerDown:I,...T}=a;return Fe({type:r?"button":void 0,onClick(u){if(t){u.preventDefault();return}f==null||f(u)},onMouseDown(u){t||g==null||g(u)},onKeyDown(u){if(t||(Xe(u),y==null||y(u)),u.baseUIHandlerPrevented)return;const C=u.target===u.currentTarget&&!r&&!h()&&!t,b=u.key==="Enter",W=u.key===" ";C&&((W||b)&&u.preventDefault(),b&&(f==null||f(u)))},onKeyUp(u){t||(Xe(u),v==null||v(u)),!u.baseUIHandlerPrevented&&u.target===u.currentTarget&&!r&&!t&&u.key===" "&&(f==null||f(u))},onPointerDown(u){if(t){u.preventDefault();return}I==null||I(u)}},r?void 0:{role:"button"},d,T)},[t,d,r,h]),buttonRef:o}}function wt(e){const{allowInputSyncRef:t,disabled:n,formatOptionsRef:s,getStepAmount:r,id:o,incrementValue:l,inputRef:h,inputValue:d,intentionalTouchCheckTimeout:m,isIncrement:a,isPressedRef:f,locale:g,maxWithDefault:v,minWithDefault:y,movesAfterTouchRef:I,readOnly:T,setValue:O,startAutoChange:u,stopAutoChange:C,value:b,valueRef:W}=e,N=i.useRef({x:0,y:0}),D=i.useRef(!1),_=i.useRef(!1),S=i.useRef(""),F=b!=null&&b<=y,M=b!=null&&b>=v,x=X(c=>{t.current=!0;const w=ie(d,g,s.current);w!==null&&(W.current=w,O(w,c))}),E=i.useMemo(()=>({disabled:n||(a?M:F),"aria-readonly":T||void 0,"aria-label":a?"Increase":"Decrease","aria-controls":o,tabIndex:-1,style:{WebkitUserSelect:"none",userSelect:"none"},onTouchStart(){D.current=!0},onTouchEnd(){D.current=!1},onClick(c){const w=n||T||(a?M:F);if(c.defaultPrevented||w||(S.current==="touch"?_.current:c.detail!==0))return;x(c.nativeEvent);const $=r(c)??_e;l($,a?1:-1,void 0,c.nativeEvent)},onPointerDown(c){var L;const w=!c.button||c.button===0,$=n||(a?M:F);c.defaultPrevented||T||!w||$||(S.current=c.pointerType,_.current=!1,f.current=!0,N.current={x:c.clientX,y:c.clientY},x(c.nativeEvent),c.pointerType!=="touch"?(c.preventDefault(),(L=h.current)==null||L.focus(),u(a,c)):m.start(On,()=>{const j=I.current;I.current=0,j!=null&&j<$n?(_.current=!0,u(a,c)):C()}))},onPointerMove(c){if(n||T||(a?M:F)||c.pointerType!=="touch"||!f.current)return;I.current!=null&&(I.current+=1);const{x:$,y:L}=N.current,j=$-c.clientX,J=L-c.clientY;j**2+J**2>Hn**2&&C()},onMouseEnter(c){const w=n||T||(a?M:F);c.defaultPrevented||w||!f.current||D.current||u(a,c)},onMouseLeave(){D.current||C()},onMouseUp(){D.current||C()}}),[x,n,r,o,l,h,a,m,M,F,f,I,T,u,C]);return i.useMemo(()=>({props:E}),[E])}const Jn=i.forwardRef(function(t,n){const{render:s,className:r,disabled:o=!1,nativeButton:l=!0,...h}=t,{allowInputSyncRef:d,disabled:m,formatOptionsRef:a,getStepAmount:f,id:g,incrementValue:v,inputRef:y,inputValue:I,intentionalTouchCheckTimeout:T,isPressedRef:O,locale:u,maxWithDefault:C,minWithDefault:b,movesAfterTouchRef:W,readOnly:N,setValue:D,startAutoChange:_,state:S,stopAutoChange:F,value:M,valueRef:x}=Le(),E=o||m,{props:c}=wt({isIncrement:!0,inputRef:y,startAutoChange:_,stopAutoChange:F,minWithDefault:b,maxWithDefault:C,value:M,inputValue:I,disabled:E,readOnly:N,id:g,setValue:D,getStepAmount:f,incrementValue:v,allowInputSyncRef:d,formatOptionsRef:a,valueRef:x,isPressedRef:O,intentionalTouchCheckTimeout:T,movesAfterTouchRef:W,locale:u}),{getButtonProps:w,buttonRef:$}=Mt({disabled:E,native:l}),L=i.useMemo(()=>({...S,disabled:E}),[S,E]);return Ve("button",t,{ref:[n,$],state:L,props:[c,h,w],customStyleHookMapping:Pe})}),Qn=i.forwardRef(function(t,n){const{render:s,className:r,disabled:o=!1,nativeButton:l=!0,...h}=t,{allowInputSyncRef:d,disabled:m,formatOptionsRef:a,getStepAmount:f,id:g,incrementValue:v,inputRef:y,inputValue:I,intentionalTouchCheckTimeout:T,isPressedRef:O,maxWithDefault:u,minWithDefault:C,movesAfterTouchRef:b,readOnly:W,setValue:N,startAutoChange:D,state:_,stopAutoChange:S,value:F,valueRef:M,locale:x}=Le(),E=o||m,{props:c}=wt({isIncrement:!1,inputRef:y,startAutoChange:D,stopAutoChange:S,minWithDefault:C,maxWithDefault:u,value:F,inputValue:I,disabled:E,readOnly:W,id:g,setValue:N,getStepAmount:f,incrementValue:v,allowInputSyncRef:d,formatOptionsRef:a,valueRef:M,isPressedRef:O,intentionalTouchCheckTimeout:T,movesAfterTouchRef:b,locale:x}),{getButtonProps:w,buttonRef:$}=Mt({disabled:E,native:l}),L=i.useMemo(()=>({..._,disabled:E}),[_,E]);return Ve("button",t,{ref:[n,$],state:L,props:[c,h,w],customStyleHookMapping:Pe})});function Zn(e){e.preventDefault(),e.stopPropagation()}const er=i.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:z});function st(){return i.useContext(er)}function Ze(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const Ae=Object.keys(nt);function tr(e){if(!e||e.valid||!e.valueMissing)return!1;let t=!1;for(const n of Ae)n!=="valid"&&(n==="valueMissing"&&(t=e[n]),e[n]&&(t=!1));return t}function nr(){const{setValidityData:e,validate:t,messageIds:n,validityData:s,validationMode:r,validationDebounceTime:o,invalid:l,markedDirtyRef:h,controlId:d,state:m,name:a}=Ue(),{formRef:f,clearErrors:g}=st(),v=Ye(),y=i.useRef(null),I=X(async(u,C=!1)=>{const b=y.current;if(!b)return;if(C){if(m.valid!==!1)return;const M=b.validity;if(!M.valueMissing){const E={value:u,state:{...nt,valid:!0},error:"",errors:[],initialValue:s.initialValue};if(b.setCustomValidity(""),d){const c=f.current.fields.get(d);c&&f.current.fields.set(d,{...c,...Ze(E,!1)})}e(E);return}const x=Ae.reduce((E,c)=>(E[c]=M[c],E),{});if(!x.valid&&!tr(x))return}function W(M){const x=Ae.reduce((c,w)=>(c[w]=M.validity[w],c),{});let E=!1;for(const c of Ae)if(c!=="valid"){if(c==="valueMissing"&&x[c])E=!0;else if(x[c])return x}return E&&!h.current&&(x.valid=!0,x.valueMissing=!1),x}v.clear();let N=null,D=[];const _=W(b);let S;if(b.validationMessage)S=b.validationMessage,D=[b.validationMessage];else{const M=Array.from(f.current.fields.values()).reduce((E,c)=>{var w,$;return c.name&&c.getValueRef&&(E[c.name]=($=(w=c.getValueRef).current)==null?void 0:$.call(w)),E},{}),x=t(u,M);typeof x=="object"&&x!==null&&"then"in x?N=await x:N=x,N!==null&&(_.valid=!1,_.customError=!0,Array.isArray(N)?(D=N,b.setCustomValidity(N.join(`
`))):N&&(D=[N],b.setCustomValidity(N)))}const F={value:u,state:_,error:S??(Array.isArray(N)?N[0]:N??""),errors:D,initialValue:s.initialValue};if(d){const M=f.current.fields.get(d);M&&f.current.fields.set(d,{...M,...Ze(F,l)})}e(F)}),T=i.useCallback((u={})=>Fe({...n.length&&{"aria-describedby":n.join(" ")},...m.valid===!1&&{"aria-invalid":!0}},u),[n,m.valid]),O=i.useCallback((u={})=>Fe({onChange(C){if(C.nativeEvent.defaultPrevented)return;if(g(a),r!=="onChange"){I(C.currentTarget.value,!0);return}if(l)return;const b=C.currentTarget;if(b.value===""){I(b.value);return}v.clear(),o?v.start(o,()=>{I(b.value)}):I(b.value)}},T(u)),[T,g,a,v,I,l,r,o]);return i.useMemo(()=>({getValidationProps:T,getInputValidationProps:O,inputRef:y,commitValidation:I}),[T,O,I])}function rr(e){const{formRef:t}=st(),{invalid:n,markedDirtyRef:s,validityData:r,setValidityData:o}=Ue(),{enabled:l=!0,value:h,id:d,name:m,controlRef:a,commitValidation:f}=e,g=qe(e.getValue);G(()=>{var y;if(!l)return;let v=h;v===void 0&&(v=(y=g.current)==null?void 0:y.call(g)),r.initialValue===null&&v!==r.initialValue&&o(I=>({...I,initialValue:v}))},[l,o,h,r.initialValue,g]),G(()=>{l&&d&&t.current.fields.set(d,{controlRef:a,validityData:Ze(r,n),validate(){var y;let v=h;v===void 0&&(v=(y=g.current)==null?void 0:y.call(g)),s.current=!0,Kt.flushSync(()=>f(v))},getValueRef:g,name:m})},[f,a,l,t,g,d,n,s,m,r,h]),G(()=>{const v=t.current.fields;return()=>{d&&v.delete(d)}},[t,d])}const sr={...hn,...Pe},or=new Set(["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape"]),ir=i.forwardRef(function(t,n){const{render:s,className:r,...o}=t,{allowInputSyncRef:l,disabled:h,formatOptionsRef:d,getAllowedNonNumericKeys:m,getStepAmount:a,id:f,incrementValue:g,inputMode:v,inputValue:y,max:I,min:T,name:O,readOnly:u,required:C,setValue:b,state:W,setInputValue:N,locale:D,inputRef:_,value:S}=Le(),{clearErrors:F}=st(),{labelId:M,validationMode:x,setTouched:E,setFocused:c,invalid:w}=Ue(),{getInputValidationProps:$,getValidationProps:L,commitValidation:j,inputRef:J}=nr(),Se=i.useRef(!1),Y=i.useRef(!1);rr({id:f,commitValidation:j,value:S,controlRef:_,name:O,getValue:()=>S??null});const re=i.useRef(S),Te=i.useRef(y);return G(()=>{re.current===S&&Te.current===y||(F(O),x==="onChange"&&j(S))},[S,y,O,F,x,j]),G(()=>{if(!(re.current===S||x==="onChange")){if(Y.current){Y.current=!1;return}j(S,!0)}},[j,x,S]),G(()=>{re.current=S,Te.current=y},[S,y]),Ve("input",t,{ref:[n,_,J],state:W,props:[{id:f,required:C,disabled:h,readOnly:u,inputMode:v,value:y,type:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-roledescription":"Number field","aria-invalid":w||void 0,"aria-labelledby":M,suppressHydrationWarning:!0,onFocus(p){if(p.defaultPrevented||u||h||Se.current)return;Se.current=!0,c(!0);const P=p.currentTarget,U=P.value.length;P.setSelectionRange(U,U)},onBlur(p){if(p.defaultPrevented||u||h)return;if(E(!0),c(!1),l.current=!0,y.trim()===""){b(null),x==="onBlur"&&j(null);return}const P=d.current,U=ie(y,D,P),V=me(U,D,P),Z=Vt(U,D,P),ee=ie(V,D,P),se=ie(Z,D,P);if(U===null)return;Y.current=!0,x==="onBlur"&&j(ee),(P==null?void 0:P.maximumFractionDigits)!=null||(P==null?void 0:P.minimumFractionDigits)!=null?(S!==ee&&b(ee,p.nativeEvent),y!==V&&N(V)):S!==se?b(ee,p.nativeEvent):!(U===S&&y===Z)&&y!==V&&N(V)},onChange(p){if(p.nativeEvent.defaultPrevented)return;l.current=!1;const P=p.target.value;if(P.trim()===""){N(P),b(null,p.nativeEvent);return}if(p.isTrusted){N(P);return}const U=ie(P,D,d.current);U!==null&&(N(P),b(U,p.nativeEvent))},onKeyDown(p){if(p.defaultPrevented||u||h)return;const P=p.nativeEvent;l.current=!0;const U=m();let V=U.has(p.key);const{decimal:Z,currency:ee,percentSign:se}=rt([],d.current),te=p.currentTarget.selectionStart,oe=p.currentTarget.selectionEnd,ge=te===0&&oe===y.length;if(p.key==="-"&&U.has("-")){const q=te===0&&oe===1&&y[0]==="-";V=!y.includes("-")||ge||q}[Z,ee,se].forEach(q=>{if(p.key===q){const xe=y.indexOf(q),Oe=te===xe&&oe===xe+1;V=!y.includes(q)||ge||Oe}});const ye=/^[0-9]$/.test(p.key),he=Je.test(p.key),be=Qe.test(p.key),ae=or.has(p.key);if(p.which===229||p.altKey||p.ctrlKey||p.metaKey||V||ye||he||be||ae)return;const Ie=ie(y,D,d.current),ne=a(p)??_e;Zn(p),p.key==="ArrowUp"?g(ne,1,Ie,P):p.key==="ArrowDown"?g(ne,-1,Ie,P):p.key==="Home"&&T!=null?b(T,P):p.key==="End"&&I!=null&&b(I,P)},onPaste(p){if(p.defaultPrevented||u||h)return;p.preventDefault();const U=(p.clipboardData||window.Clipboard).getData("text/plain"),V=ie(U,D,d.current);V!==null&&(l.current=!1,b(V,p.nativeEvent),N(U))}},$(),L(),o],customStyleHookMapping:sr})}),ar=i.memo(({product:e})=>{const{t}=Ht("translation",{keyPrefix:"components.CartButtonAdd"}),n=It(),[s,r]=i.useState(0);i.useEffect(()=>{const m=n.cartItems.find(a=>a.productId===e.id);r(m?m.quantity:0)},[n.cartItems,e.id]);const o=()=>{n.addProduct(e)},l=()=>{n.decrementProduct(e.id)},h=m=>{const a=parseInt(m.target.value);!isNaN(a)&&a>=0&&n.setQuantity(e.id,a)},d=jt.useId();return R.jsx(R.Fragment,{children:s===0?R.jsx($t,{variant:"contained",className:le.buy,onClick:o,children:t("textButton")}):R.jsx(Wn,{id:d,value:s,className:le.field,children:R.jsxs(Yn,{className:le.group,children:[R.jsx(Qn,{className:le.decrement,onClick:l,children:R.jsx(Gt,{})}),R.jsx(ir,{className:le.input,value:s,onChange:h}),R.jsx(Jn,{className:le.increment,onClick:o,children:R.jsx(Wt,{})})]})})})}),ur=et(R.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),cr="_buttons_1yi30_5",yt={"cart-item":"_cart-item_1yi30_1",buttons:cr},lr="_price_gxzs0_1",ht={price:lr,"price-old":"_price-old_gxzs0_8"},fr=({price:e,oldPrice:t})=>R.jsxs(fe,{component:"span",children:[R.jsx(We,{component:"span",className:ht.price,children:e.toLocaleString("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).replace("руб.","₽").replace(/\s/g," ")}),t&&R.jsx(We,{component:"span",className:ht["price-old"],children:t.toLocaleString("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).replace("руб.","₽").replace(/\s/g," ")})]}),Ir=i.memo(({product:e,onRemove:t})=>R.jsxs(fe,{gap:2,className:yt["cart-item"],children:[R.jsx("img",{width:128,height:128,src:e.photo}),R.jsxs(fe,{width:1,pr:2,sx:{display:"flex",justifyContent:"space-between"},children:[R.jsxs(fe,{children:[R.jsx(We,{variant:"h6",children:e.name}),R.jsx(ar,{product:e})]}),R.jsxs(fe,{children:[R.jsx(fe,{className:yt.buttons,children:R.jsx(Bt,{"aria-label":"delete",children:R.jsx(ur,{onClick:t})})}),R.jsx(fr,{price:e.price,oldPrice:e.oldPrice})]})]})]}));export{Ir as C,fr as P,It as a,ar as b,br as u};
